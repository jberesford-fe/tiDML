---
title: "Introduction to tiDML"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to tiDML}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r knit-options, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```
# First pass with tiDML

In the simplest case, you can use the package under complete default settings. Pick a model, specify data, outcome variable, treatment variable, and covariates, and hit go. Currently, the default models available are:
+ `dml_rf()` for random forest, and
+ `dml_nnet()` for a neural network.

Here I use the `diamonds` data from `ggplot2` to estimate the effect of being rated "ideal" on a diamonds price, after having controlled for caret, depth, etc.


```{r simple}
library(tiDML)

df <- diamonds_sample()

fit_rf <- dml_rf(
  data = df,
  y = "price",
  d = "is_rated_ideal",
  x = c("carat", "depth", "table", "x", "y", "z"),
)

tidy(fit_rf)
```
The string `rf` is a shortcut for using the `ranger` package to fit random forest models. Other options include `lasso`, `ridge`, `enet`, `xgboost`, and `nnet`. See ' for LINK to MAN for the enging/model types available as default.

Printing out the recipe steps of the DML estimate shows the preprocessing steps that were automatically applied to the data before fitting the nuisance models. In this case, 
+ zero variance filtering,
+ Median imputation for missing values,
+ Dummy encoding for categorical variables, and
+ Centering and scaling of numeric variables.

